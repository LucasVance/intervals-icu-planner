# Automated training planner for Intervals.icu

This repository contains a Python script that automatically generates a daily training plan based on your long-term fitness goals and syncs it as a structured workout to your [Intervals.icu](https://intervals.icu) calendar. The vast majority of the code in this repository, along with this readme, is generated by Gemini.

The script runs automatically every day using GitHub Actions, creating a dynamic feedback loop: it reads your current fitness state, calculates the precise load needed for the next day, and populates your calendar so you always know what's next.

## Core concepts

This planner is built on the well-established principles of training load management, with a key custom metric for controlling daily intensity.

-   **CTL (Chronic Training Load):** A proxy for your overall fitness, based on a long-term weighted average of your training load. The number of days is configurable.
-   **ATL (Acute Training Load):** A proxy for your fatigue, based on a short-term weighted average. The number of days is configurable.
-   **TSB (Training Stress Balance):** Calculated as `CTL - ATL`, this represents your "form" or "freshness." A negative TSB is typical during a build phase. This script aims to hold your TSB at a specific target level.
-   **ALB (Acute Load Balance):** Defined as `ATL (at the start of the day) - Daily TSS`. This acts as a "guard rail" to prevent excessively large single-day jumps in training stress, ensuring a smooth and sustainable progression.

## Features

-   Fetches your current fitness (CTL) and fatigue (ATL) daily from the Intervals.icu API.
-   Calculates the precise Training Stress Score (TSS) required for the next day based on your goals.
-   **Configurable Time Constants:** Allows you to set custom time periods for CTL and ATL (e.g., 40/4 days instead of the standard 42/7).
-   **Dual-Constraint Calculation:** Calculates TSS based on two primary inputs:
    1.  A long-term **Target TSB** you want to maintain.
    2.  A limiting **ALB (Acute Load Balance)** that controls day-to-day aggressiveness.
-   **Advanced Workout Generation:**
    * Builds workouts from a library of user-defined **templates**.
    * Supports **variable duration** steps within templates to precisely match the target TSS.
    * Parses a **weekly schedule** to plan different workout types on different days.
    * Supports **"double" days** with a fixed workout plus a variable workout, or two workouts with an **evenly split** TSS load.
-   Uploads one or more workouts to your Intervals.icu calendar for the next day.
-   Designed for full automation via the included GitHub Actions workflow.

## Setup and configuration

To get this running, you'll need to configure your goals and set up the necessary secrets for the GitHub Action. Fork this repository and complete the next steps.

### 1. The `config.json` File

This file holds all the non-sensitive parameters for your training plan. Edit the values in `config.json` to match your personal goals.